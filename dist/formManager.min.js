(()=>{"use strict";function e(){document.getElementById("name").setAttribute("disabled","true"),document.getElementById("email").setAttribute("disabled","true"),document.getElementById("url").setAttribute("disabled","true")}function t(e){document.getElementById("save").textContent=e}document.getElementById("save").addEventListener("click",(()=>{if("更改"===document.getElementById("save").textContent)return document.getElementById("name").removeAttribute("disabled"),document.getElementById("email").removeAttribute("disabled"),document.getElementById("url").removeAttribute("disabled"),void t("保存");const n=document.getElementById("name").value.trim(),m=document.getElementById("email").value.trim(),l=document.getElementById("url").value.trim();""!==n&&""!==m?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m)?chrome.storage.sync.get(["name","email","url"],(a=>{const d=n!==a.name||m!==a.email,r=l!==a.url;d||r?chrome.storage.sync.set({name:n,email:m,url:l},(()=>{e(),t("更改")})):(e(),t("更改"))})):alert("请输入有效的邮箱地址!"):alert("请填写必填字段：姓名和邮箱!")})),document.addEventListener("DOMContentLoaded",(()=>{chrome.storage.sync.get(["name","email","url"],(n=>{document.getElementById("name").value=n.name||"",document.getElementById("email").value=n.email||"",document.getElementById("url").value=n.url||"",(n.name||n.email||n.url)&&(e(),t("更改"))}));const n=document.querySelectorAll(".dl-menu li a"),m=document.querySelectorAll(".tab-content");n.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),m.forEach((e=>e.classList.remove("active")));const l=e.getAttribute("href").substring(1);document.getElementById(l).classList.add("active"),n.forEach((e=>e.parentElement.classList.remove("active"))),e.parentElement.classList.add("active")}))}))}))})();